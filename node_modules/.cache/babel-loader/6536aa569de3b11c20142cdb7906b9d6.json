{"ast":null,"code":"import _toConsumableArray from\"/Users/sawadamakoto/PC/Github/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/sawadamakoto/PC/Github/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';import defaultDataset from\"./dataset\";import'./assets/styles/style.css';import{AnswersList,Chats}from\"./components/index\";import FormDialog from'./components/Forms/FormDialog';var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),answers=_useState2[0],setAnswers=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),chats=_useState4[0],setChats=_useState4[1];var _useState5=useState(\"init\"),_useState6=_slicedToArray(_useState5,2),currentId=_useState6[0],setCurrentId=_useState6[1];var dataset=defaultDataset;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),open=_useState8[0],setOpen=_useState8[1];var displayNextQuestion=function displayNextQuestion(nextQuestionId,nextDataset){addChats({text:nextDataset.question,type:'question'});setAnswers(nextDataset.answers);setCurrentId(nextQuestionId);};var selectAnswer=function selectAnswer(selectedAnswer,nextQuestionId){switch(true){case nextQuestionId==='contact':handleOpen();break;case /^https:*/.test(nextQuestionId):var a=document.createElement('a');a.href=nextQuestionId;a.target='_blank';a.click();break;default:addChats({text:selectedAnswer,type:'answer'});setTimeout(function(){return displayNextQuestion(nextQuestionId,dataset[nextQuestionId]);},1200);//先程作成した関数を呼び出す引数は()内\nbreak;}};var addChats=function addChats(chat){setChats(function(prevChats){return[].concat(_toConsumableArray(prevChats),[chat]);});};var handleOpen=function handleOpen(){setOpen(true);};var handleClose=useCallback(function(){setOpen(false);},[setOpen]);useEffect(function(){var initAnswer=\"\";selectAnswer(initAnswer,currentId);},[]);useEffect(function(){var scrollArea=document.getElementById('scroll-area');if(scrollArea){scrollArea.scrollTop=scrollArea.scrollHeight;}});return/*#__PURE__*/React.createElement(\"section\",{className:\"c-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"c-box\"},/*#__PURE__*/React.createElement(Chats,{chats:chats}),/*#__PURE__*/React.createElement(AnswersList,{answers:answers,select:selectAnswer}),/*#__PURE__*/React.createElement(FormDialog,{open:open,handleOpen:handleOpen,handleClose:handleClose})));};export default App;","map":{"version":3,"sources":["/Users/sawadamakoto/PC/Github/chatbot-demo/src/App.jsx"],"names":["React","useState","useEffect","useCallback","defaultDataset","AnswersList","Chats","FormDialog","App","answers","setAnswers","chats","setChats","currentId","setCurrentId","dataset","open","setOpen","displayNextQuestion","nextQuestionId","nextDataset","addChats","text","question","type","selectAnswer","selectedAnswer","handleOpen","test","a","document","createElement","href","target","click","setTimeout","chat","prevChats","handleClose","initAnswer","scrollArea","getElementById","scrollTop","scrollHeight"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\nimport defaultDataset from \"./dataset\";\nimport './assets/styles/style.css'\nimport { AnswersList, Chats } from \"./components/index\"\nimport FormDialog from './components/Forms/FormDialog';\n\n\nconst App = () => {\n    const [answers, setAnswers] = useState([]);\n    const [chats, setChats] = useState([]);\n    const [currentId, setCurrentId] = useState(\"init\");\n    const dataset = defaultDataset;\n    const [open, setOpen] = useState(false);\n\n\n  const displayNextQuestion = (nextQuestionId, nextDataset) => {\n      addChats({\n        text: nextDataset.question,\n        type: 'question'\n      })\n\n        setAnswers(nextDataset.answers)\n        setCurrentId(nextQuestionId)\n    }\n\n  const selectAnswer = (selectedAnswer, nextQuestionId) => {\n    switch(true) {\n\n      case (nextQuestionId === 'contact'):\n        handleOpen();\n        break;\n      \n      case (/^https:*/.test(nextQuestionId)):\n        const a = document.createElement('a');\n        a.href = nextQuestionId;\n        a.target = '_blank';\n        a.click();\n        break;\n\n      default:\n        addChats({ \n        text: selectedAnswer,\n        type: 'answer'\n        })\n\n        setTimeout(() => displayNextQuestion(nextQuestionId, dataset[nextQuestionId]), 1200) //先程作成した関数を呼び出す引数は()内\n        break;\n    }\n  }\n\n  const addChats = (chat)　=> {\n    setChats(prevChats => {\n      return [...prevChats, chat]\n    })\n  }\n\n  const handleOpen = () => {\n    setOpen(true)\n  };\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n  }, [setOpen]);\n\n  useEffect(() => {\n    const initAnswer = \"\";\n    selectAnswer(initAnswer, currentId)\n},[]);\n\n\n  useEffect(() => {\n    const scrollArea = document.getElementById('scroll-area')\n    if(scrollArea) {\n      scrollArea.scrollTop = scrollArea.scrollHeight\n    }\n  })\n\n\n  return (\n    <section className=\"c-section\">\n      <div className=\"c-box\">\n        <Chats chats={chats} />\n        <AnswersList answers={answers} select={selectAnswer} />\n        <FormDialog　open={open} handleOpen={handleOpen} handleClose={handleClose} />\n      </div>\n    </section>\n    );\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}