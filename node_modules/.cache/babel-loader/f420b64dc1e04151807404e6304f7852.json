{"ast":null,"code":"import _toConsumableArray from\"/Users/sawadamakoto/PC/Github/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/sawadamakoto/PC/Github/chatbot-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';import defaultDataset from\"./dataset\";import'./assets/styles/style.css';import{AnswersList,Chats}from\"./components/index\";import FormDialog from'./components/Forms/FormDialog';import{Loading}from'./components/Loading';var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),answers=_useState2[0],setAnswers=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),chats=_useState4[0],setChats=_useState4[1];var _useState5=useState(\"init\"),_useState6=_slicedToArray(_useState5,2),currentId=_useState6[0],setCurrentId=_useState6[1];var dataset=defaultDataset;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),open=_useState8[0],setOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),noneDisplay=_useState10[0],setNoneDisplay=_useState10[1];var displayNextQuestion=function displayNextQuestion(nextQuestionId,nextDataset){addChats({text:nextDataset.question,type:'question'});setAnswers(nextDataset.answers);setCurrentId(nextQuestionId);};var selectAnswer=function selectAnswer(selectedAnswer,nextQuestionId){switch(true){case nextQuestionId==='init':setNoneDisplay(true);setTimeout(function(){return displayNextQuestion(nextQuestionId,dataset[nextQuestionId]);},1000);break;case nextQuestionId==='contact':handleOpen();break;case /^https:*/.test(nextQuestionId):var a=document.createElement('a');a.href=nextQuestionId;a.target='_blank';a.click();break;default:addChats({text:selectedAnswer,type:'answer'});setNoneDisplay(true);setTimeout(function(){return displayNextQuestion(nextQuestionId,dataset[nextQuestionId]);},1200);break;}};var addChats=function addChats(chat){setChats(function(prevChats){return[].concat(_toConsumableArray(prevChats),[chat]);});setNoneDisplay(false);};var handleOpen=function handleOpen(){setOpen(true);};var handleClose=useCallback(function(){setOpen(false);},[setOpen]);useEffect(function(){var initAnswer=\"\";selectAnswer(initAnswer,currentId);},[]);useEffect(function(){var scrollArea=document.getElementById('scroll-area');if(scrollArea){scrollArea.scrollTop=scrollArea.scrollHeight;}});return/*#__PURE__*/React.createElement(\"section\",{className:\"c-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"c-box\"},/*#__PURE__*/React.createElement(Chats,{chats:chats}),!noneDisplay?/*#__PURE__*/React.createElement(AnswersList,{answers:answers,select:selectAnswer}):/*#__PURE__*/React.createElement(Loading,null),/*#__PURE__*/React.createElement(FormDialog,{open:open,handleOpen:handleOpen,handleClose:handleClose})));};export default App;","map":{"version":3,"sources":["/Users/sawadamakoto/PC/Github/chatbot-demo/src/App.jsx"],"names":["React","useState","useEffect","useCallback","defaultDataset","AnswersList","Chats","FormDialog","Loading","App","answers","setAnswers","chats","setChats","currentId","setCurrentId","dataset","open","setOpen","noneDisplay","setNoneDisplay","displayNextQuestion","nextQuestionId","nextDataset","addChats","text","question","type","selectAnswer","selectedAnswer","setTimeout","handleOpen","test","a","document","createElement","href","target","click","chat","prevChats","handleClose","initAnswer","scrollArea","getElementById","scrollTop","scrollHeight"],"mappings":"0UAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,CAAoCC,WAApC,KAAsD,OAAtD,CACA,MAAOC,CAAAA,cAAP,KAA2B,WAA3B,CACA,MAAO,2BAAP,CACA,OAASC,WAAT,CAAsBC,KAAtB,KAAmC,oBAAnC,CACA,MAAOC,CAAAA,UAAP,KAAuB,+BAAvB,CACA,OAASC,OAAT,KAAwB,sBAAxB,CAGA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,eACgBR,QAAQ,CAAC,EAAD,CADxB,wCACPS,OADO,eACEC,UADF,8BAEYV,QAAQ,CAAC,EAAD,CAFpB,yCAEPW,KAFO,eAEAC,QAFA,8BAGoBZ,QAAQ,CAAC,MAAD,CAH5B,yCAGPa,SAHO,eAGIC,YAHJ,eAId,GAAMC,CAAAA,OAAO,CAAGZ,cAAhB,CAJc,eAKUH,QAAQ,CAAC,KAAD,CALlB,yCAKPgB,IALO,eAKDC,OALC,8BAMwBjB,QAAQ,CAAC,KAAD,CANhC,0CAMPkB,WANO,gBAMMC,cANN,gBAQhB,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,cAAD,CAAiBC,WAAjB,CAAiC,CACzDC,QAAQ,CAAC,CACPC,IAAI,CAAEF,WAAW,CAACG,QADX,CAEPC,IAAI,CAAE,UAFC,CAAD,CAAR,CAKEhB,UAAU,CAACY,WAAW,CAACb,OAAb,CAAV,CACAK,YAAY,CAACO,cAAD,CAAZ,CACH,CARH,CAUA,GAAMM,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,cAAD,CAAiBP,cAAjB,CAAoC,CACvD,OAAO,IAAP,EAEE,IAAMA,CAAAA,cAAc,GAAK,MAAzB,CACEF,cAAc,CAAC,IAAD,CAAd,CACAU,UAAU,CAAC,iBAAMT,CAAAA,mBAAmB,CAACC,cAAD,CAAiBN,OAAO,CAACM,cAAD,CAAxB,CAAzB,EAAD,CAAqE,IAArE,CAAV,CACA,MAEF,IAAMA,CAAAA,cAAc,GAAK,SAAzB,CACES,UAAU,GACV,MAEF,IAAM,YAAWC,IAAX,CAAgBV,cAAhB,CAAN,CACE,GAAMW,CAAAA,CAAC,CAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAV,CACAF,CAAC,CAACG,IAAF,CAASd,cAAT,CACAW,CAAC,CAACI,MAAF,CAAW,QAAX,CACAJ,CAAC,CAACK,KAAF,GACA,MAEF,QACEd,QAAQ,CAAC,CACTC,IAAI,CAAEI,cADG,CAETF,IAAI,CAAE,QAFG,CAAD,CAAR,CAKAP,cAAc,CAAC,IAAD,CAAd,CACAU,UAAU,CAAC,iBACTT,CAAAA,mBAAmB,CAACC,cAAD,CAAiBN,OAAO,CAACM,cAAD,CAAxB,CADV,EAAD,CAEN,IAFM,CAAV,CAGE,MA5BN,CA+BD,CAhCD,CAkCA,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACe,IAAD,CAAU,CACzB1B,QAAQ,CAAC,SAAA2B,SAAS,CAAI,CACpB,mCAAWA,SAAX,GAAsBD,IAAtB,GACD,CAFO,CAAR,CAGAnB,cAAc,CAAC,KAAD,CAAd,CACD,CALD,CAOA,GAAMW,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBb,OAAO,CAAC,IAAD,CAAP,CACD,CAFD,CAIA,GAAMuB,CAAAA,WAAW,CAAGtC,WAAW,CAAC,UAAM,CACpCe,OAAO,CAAC,KAAD,CAAP,CACD,CAF8B,CAE5B,CAACA,OAAD,CAF4B,CAA/B,CAIAhB,SAAS,CAAC,UAAM,CACd,GAAMwC,CAAAA,UAAU,CAAG,EAAnB,CACAd,YAAY,CAACc,UAAD,CAAa5B,SAAb,CAAZ,CACD,CAHQ,CAGP,EAHO,CAAT,CAMAZ,SAAS,CAAC,UAAM,CACd,GAAMyC,CAAAA,UAAU,CAAGT,QAAQ,CAACU,cAAT,CAAwB,aAAxB,CAAnB,CACA,GAAGD,UAAH,CAAe,CACbA,UAAU,CAACE,SAAX,CAAuBF,UAAU,CAACG,YAAlC,CACD,CACF,CALQ,CAAT,CAOA,mBACE,+BAAS,SAAS,CAAC,WAAnB,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,oBAAC,KAAD,EAAO,KAAK,CAAElC,KAAd,EADF,CAEG,CAACO,WAAD,cACC,oBAAC,WAAD,EAAa,OAAO,CAAET,OAAtB,CAA+B,MAAM,CAAEkB,YAAvC,EADD,cAGC,oBAAC,OAAD,MALJ,cAOE,oBAAC,UAAD,EAAY,IAAI,CAAEX,IAAlB,CAAwB,UAAU,CAAEc,UAApC,CAAgD,WAAW,CAAEU,WAA7D,EAPF,CADF,CADF,CAaD,CA7FD,CA+FA,cAAehC,CAAAA,GAAf","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\nimport defaultDataset from \"./dataset\";\nimport './assets/styles/style.css'\nimport { AnswersList, Chats } from \"./components/index\"\nimport FormDialog from './components/Forms/FormDialog';\nimport { Loading } from './components/Loading';\n\n\nconst App = () => {\n    const [answers, setAnswers] = useState([]);\n    const [chats, setChats] = useState([]);\n    const [currentId, setCurrentId] = useState(\"init\");\n    const dataset = defaultDataset;\n    const [open, setOpen] = useState(false);\n    const [noneDisplay, setNoneDisplay] = useState(false);\n\n  const displayNextQuestion = (nextQuestionId, nextDataset) => {\n      addChats({\n        text: nextDataset.question,\n        type: 'question'\n      })\n\n        setAnswers(nextDataset.answers)\n        setCurrentId(nextQuestionId)\n    }\n\n  const selectAnswer = (selectedAnswer, nextQuestionId) => {\n    switch(true) {\n\n      case (nextQuestionId === 'init'):\n        setNoneDisplay(true);\n        setTimeout(() => displayNextQuestion(nextQuestionId, dataset[nextQuestionId]), 1000);\n        break;\n\n      case (nextQuestionId === 'contact'):\n        handleOpen();\n        break;\n      \n      case (/^https:*/.test(nextQuestionId)):\n        const a = document.createElement('a');\n        a.href = nextQuestionId;\n        a.target = '_blank';\n        a.click();\n        break;\n\n      default:\n        addChats({ \n        text: selectedAnswer,\n        type: 'answer'\n        });\n\n        setNoneDisplay(true);\n        setTimeout(() => (\n          displayNextQuestion(nextQuestionId, dataset[nextQuestionId])\n          ),1200)\n          break;\n        }\n\n  }\n\n  const addChats = (chat) => {\n    setChats(prevChats => {\n      return [...prevChats, chat]\n    })\n    setNoneDisplay(false);\n  }\n  \n  const handleOpen = () => {\n    setOpen(true)\n  };\n  \n  const handleClose = useCallback(() => {\n    setOpen(false)\n  }, [setOpen]);\n  \n  useEffect(() => {\n    const initAnswer = \"\";\n    selectAnswer(initAnswer, currentId)\n  },[]);\n  \n  \n  useEffect(() => {\n    const scrollArea = document.getElementById('scroll-area')\n    if(scrollArea) {\n      scrollArea.scrollTop = scrollArea.scrollHeight\n    }\n  })\n\n  return (\n    <section className=\"c-section\">\n      <div className=\"c-box\">\n        <Chats chats={chats} />\n        {!noneDisplay ? (\n          <AnswersList answers={answers} select={selectAnswer} />\n        ) : (\n          <Loading/>\n        )}\n        <FormDialog open={open} handleOpen={handleOpen} handleClose={handleClose} />\n      </div>\n    </section>\n    );\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}